<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<f:metadata>
		<f:event type="preRenderView" listener="#{commentaireBean.setup}" />
	</f:metadata>
	
	<h:form id="formCommentaire">
		<link rel="stylesheet" type="text/css" href="spring/resources/css/commentaire.css" />
		<h:panelGroup id="commentaireSaisie">
	   		<p:inputTextarea id="commentaire_saisie" placeholder="#{label['dossiers.overview.commentaires_saisie.saisir_nouveau_commentaire']}" value="#{commentaireBean.commentaire}" required="true"/>
			<p:commandButton value="#{label['dossiers.overview.commentaires_input.libelle_bouton']}" styleClass="ui-priority-primary" actionListener="#{commentaireBean.ajouterCommentaire}" update=":commentairesGroup :formCommentaire:commentaireSaisie :messages"/>
 		</h:panelGroup>
 	</h:form>
 	<h:panelGroup id="commentairesGroup">
 		<div id="commentaire_marge_entre_boutton_et_liste_commentaires">
		 	<p:dataTable var="commentaire" value="#{commentaireBean.commentaires}" 
		 			sortBy="#{commentaire.dateCreation}" sortOrder="descending" sortMode="single" 
					id="commentairesTable" widgetVar="commentaires_table" reflow="true"
					emptyMessage="Aucun commentaire n'a été trouvé.">
					<p:column width="200"
						headerText="#{label['dossiers.overview.commentaires_table.date_creation']}" >
						<h:outputText value="#{commentaire.dateCreation}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
						</h:outputText>
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.commentaires_table.auteur']}" >
						<h:outputText value="#{commentaire.auteurPrenom} #{commentaire.auteurNom}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.commentaires_table.commentaire_du_dossier']}">
						<h:outputText value="#{commentaire.contenu}" />
					</p:column>
			</p:dataTable>
		</div>	
	</h:panelGroup>	
	

</ui:composition>