<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<f:metadata>
		<f:event type="preRenderView" listener="#{anomalieBean.setup}" />
	</f:metadata>

	<h:form id="formAnomalie">
		<h:panelGroup id="anomaliesGroup">
			<p:dataTable var="anomalie" value="#{anomalieBean.anomalies}"
				id="anomaliesTable" widgetVar="anomalies_table" reflow="true"
				emptyMessage="Aucune anomalie n'a été trouvée." paginator="true"
				rows="10">
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.perimetre']}">
					<h:outputText value="#{anomalie.perimetre}" />
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.type']}">
					<h:outputText value="#{anomalie.type}" />
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.donnees_GA']}">
					<h:outputText value="#{anomalie.donneesGA}" />
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.donnees_PAY']}">
					<h:outputText value="#{anomalie.donneesPAY}" />
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.date_echeance']}">
					<h:outputText value="#{anomalie.dateEcheance}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.mode_operatoire']}">
					<h:outputText value="#{anomalie.modeOperatoire}" />
				</p:column>
				<p:column width="13%"
					headerText="#{label['dossiers.overview.anomalies_table.header.etat_correction']}">
					<p:selectOneMenu id="listEtatCorrection"
						value="#{anomalie.etatCorrection}">
						<f:selectItems value="#{anomalieBean.listeEtatsCorrection}" />
					</p:selectOneMenu>
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.dernier_correcteur']}">
					<h:outputText value="#{anomalie.responsablePrenom} #{anomalie.responsableNom}" />
				</p:column>
				<p:column
					headerText="#{label['dossiers.overview.anomalies_table.header.actions']}">
					<p:commandButton action="#{anomalieBean.modifierEtatCorrection}" update=":ongletsDossier:formAnomalie:anomaliesGroup :messages" icon="ui-icon-check" 
						value="#{label['dossiers.overview.anomalies_table.header.actions.button']}">
						<f:setPropertyActionListener value="#{anomalie}" target="#{anomalieBean.selectedAnomalie}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
		</h:panelGroup>
	</h:form>

</ui:composition>
