<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<h:form id="formAlerte">
		<div id="alertes">
			<h:panelGroup id="alertesGroup">
				<p:dataTable var="alerte" value="#{alerteBean.alertes}"
					id="alertesTable" widgetVar="alertes_table" reflow="true"
					emptyMessage="#{label['dossiers.overview.alertes_table.empty_message']}" paginator="true"
					rows="10">
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.perimetre']}">
						<h:outputText value="#{alerte.perimetre}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.type']}">
						<h:outputText value="#{alerte.type}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.donnee']}">
						<h:outputText value="#{alerte.valeur}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.date_echeance']}">
						<h:outputText value="#{alerte.dateEcheance}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>
					<p:column  styleClass="liste_etats"
						headerText="#{label['dossiers.overview.alertes_table.header.etat']}">
						<p:selectOneMenu id="listEtat" value="#{alerte.etat}">
							<f:selectItems value="#{alerte.listeEtats}" var="etat" itemLabel="#{etat.libelle}" itemValue="#{etat}" />
						</p:selectOneMenu>
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.dernier_correcteur']}">
						<h:outputText value="#{alerte.responsablePrenom} #{alerte.responsableNom}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.actions']}">
						<p:commandButton action="#{alerteBean.modifierEtat}" update=":ongletsDossier:formAlerte:alertesGroup :messages" 
							value="#{label['dossiers.overview.alertes_table.header.actions.button']}">
							<f:setPropertyActionListener value="#{alerte}" target="#{alerteBean.selectedAlerte}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:panelGroup>
		</div>
	</h:form>

</ui:composition>
