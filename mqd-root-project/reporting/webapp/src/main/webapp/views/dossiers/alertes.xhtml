<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<f:metadata>
		<f:event type="preRenderView" listener="#{alerteBean.setup}" />
	</f:metadata>

	<h:form id="formAlerte">
		<div id="alertes">
			<h:panelGroup id="alertesGroup">
				<p:dataTable var="alerte" value="#{alerteBean.alertes}"
					id="alertesTable" widgetVar="alertes_table" reflow="true"
					emptyMessage="Aucune alerte n'a été trouvée." paginator="true"
					rows="10">
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.perimetre']}">
						<h:outputText value="#{alerte.perimetre}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.type']}">
						<h:outputText value="#{alerte.type}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.donnee']}">
						<h:outputText value="#{alerte.donnee}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.date_echeance']}">
						<h:outputText value="#{alerte.dateEcheance}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>
					<p:column styleClass="liste_etats_correction"
						headerText="#{label['dossiers.overview.alertes_table.header.etat_correction']}">
						<p:selectOneMenu id="listEtatAlerte"
							value="#{alerte.etatCorrection}">
							<f:selectItems value="#{alerteBean.listeEtatsCorrection}" />
						</p:selectOneMenu>
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.dernier_correcteur']}">
						<h:outputText value="#{alerte.responsablePrenom} #{alerte.responsableNom}" />
					</p:column>
					<p:column
						headerText="#{label['dossiers.overview.alertes_table.header.actions']}">
						<p:commandButton action="#{alerteBean.modifierEtatCorrection}" update=":ongletsDossier:formAlerte:alertesGroup :messages" 
							value="#{label['dossiers.overview.alertes_table.header.actions.button']}">
							<f:setPropertyActionListener value="#{alerte}" target="#{alerteBean.selectedAlerte}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:panelGroup>
		</div>
	</h:form>

</ui:composition>
